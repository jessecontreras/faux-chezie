{"ast":null,"code":"import _asyncToGenerator from \"/Users/jesse/Documents/faux-chezie/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { ModalComponent } from '../modal/modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/account.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"../_services/erg.service\";\nimport * as i4 from \"@angular/material/button\";\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(accountService, matDialog, ergService) {\n      this.accountService = accountService;\n      this.matDialog = matDialog;\n      this.ergService = ergService; //\n\n      this.ergMemberCount = 0;\n      this.user = this.accountService.userValue;\n    }\n\n    ngOnInit() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        const ergs = yield _this.getAllErgs();\n        console.log(ergs);\n        yield _this.calcErgMemberCount();\n      })();\n    }\n\n    getAllErgs() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          _this2.ergService.getAllErgs().subscribe( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(function* (ergs) {\n              _this2.ergs = ergs;\n            });\n\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        } catch (err) {\n          console.log(err);\n          throw err;\n        }\n      })();\n    }\n\n    calcErgMemberCount() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          let memberCount = 0;\n\n          _this3.ergs.forEach(erg => {\n            memberCount += erg.numberOfUsers;\n          }); //Assign this to our class variable...we technically don't need a return, we do bc we need to return a Promise<number> but we really don't.\n\n\n          _this3.ergMemberCount = memberCount;\n          return memberCount;\n        } catch (err) {\n          console.log(err);\n          throw err;\n        }\n      })();\n    }\n\n    openAddERGDialog() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const dialogConfig = new MatDialogConfig();\n          dialogConfig.id = 'modal-component';\n          dialogConfig.height = '500px';\n          dialogConfig.width = '700px'; // https://material.angular.io/components/dialog/overview\n\n          const modalDialog = _this4.matDialog.open(ModalComponent, dialogConfig);\n        } catch (err) {\n          console.log(err);\n          throw err;\n        }\n      })();\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.ErgService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 16,\n    vars: 2,\n    consts: [[1, \"page-container\"], [1, \"home\"], [1, \"kpi-1\"], [1, \"kpi-1-title\"], [1, \"kpi-1-metric\"], [1, \"kpi-2\"], [1, \"kpi-2-title\"], [1, \"kpi-2-metric\"], [1, \"ergs-header\"], [\"mat-button\", \"\", 1, \"add-erg-button\", 3, \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtext(4, \"# OF ERGs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵtext(9, \"ERG MEMBERS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵtext(13, \"All ERGs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_14_listener() {\n          return ctx.openAddERGDialog();\n        });\n        i0.ɵɵtext(15, \" Add ERG \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.ergs.length);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.ergMemberCount);\n      }\n    },\n    directives: [i4.MatButton],\n    styles: [\".page-container[_ngcontent-%COMP%]{width:100vw}@media (min-width: 992px){.page-container[_ngcontent-%COMP%]{width:calc(100vw - 90px);left:90px;position:relative}.home[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(11,1fr);grid-template-rows:repeat(11,1fr);height:100%;min-height:100vh;background-color:#f9f9fa}.kpi-1[_ngcontent-%COMP%], .kpi-2[_ngcontent-%COMP%], .kpi-3[_ngcontent-%COMP%]{grid-row:3/5;min-height:150px;min-width:300px;place-self:center;border-radius:10px;background-color:#fff;width:95%;height:100%;box-shadow:#ccc3 0 1px 2px}.kpi-1[_ngcontent-%COMP%]{grid-column:2/5}.kpi-2[_ngcontent-%COMP%]{grid-column:5/8}.kpi-3[_ngcontent-%COMP%]{grid-column:8/11}.kpi-1-title[_ngcontent-%COMP%], .kpi-2-title[_ngcontent-%COMP%], .kpi-3-title[_ngcontent-%COMP%], .kpi-1-metric[_ngcontent-%COMP%], .kpi-2-metric[_ngcontent-%COMP%], .kpi-3-metric[_ngcontent-%COMP%]{color:#000;display:flex;flex-flow:row wrap;justify-content:flex-start;padding:25px}.ergs-header[_ngcontent-%COMP%]{grid-area:7/2/7/4}.add-erg-button[_ngcontent-%COMP%]{grid-area:6/8/7/12;background-color:#3248f3;color:#fff;align-self:center;width:40%;min-width:40px}}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}